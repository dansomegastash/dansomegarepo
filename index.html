<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple Form with Discord Webhook</title>
<style>
       body, html {
    height: 100%;
    margin: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
  }
      * {
        font-family: Sans-serif;
        color: #d4d3da;
      }
      a {
        color: #6daebd;
      }
      a:hover {
        color: #4f9eb0;
      }      
      pre, code {
        font-family: monospace;
        background-color: #1e2324;
        padding: 4px;
        overflow-x: auto;
      }
      pre {
        padding: 8px;
      }
      pre code {
        background-color: transparent;
        border: none;
        padding: 0px;
      }
      body {
        background-color: #1e2324;
        width: 100%;
        height: 100%;
        margin: 0px;
      }
      button {
        background-color: #33626c;
        padding: 6px;
        padding-left: 8px;
        padding-right: 8px;
        border: transparent;
        font-size: 15px;
      }
      #main_div {
        max-width: 800px;
        object-fit: contain;

        background-color: #252b2d;

        padding: 4px;
        padding-left: 16px;
        padding-right: 16px;
        
        margin: 16px;
        margin-left: auto;
        margin-right: auto;
      }
      #buttons_container {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
  /* Style for submit button */
  input[type="submit"] {
    background-color: #1e2324; /* Background color */
    color: white; /* Text color */
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  input[type="text"] {
    background-color: #252b2d; /* Background color */
    color: #d4d3da; /* Text color */
    border: 1px solid #333; /* Border color */
    padding: 8px; /* Padding */
    width: calc(100% - 16px); /* Adjust width */
    margin-bottom: 12px; /* Margin bottom */
    box-sizing: border-box; /* Include padding and border in the element's total width and height */
  }

  /* Hover effect for submit button */
  input[type="submit"]:hover {
    background-color: #333; /* Darken background color on hover */
  }
    </style>
</head>
<body>

<h2>Submit Data to Discord</h2>

<form id="myForm">
  <label for="name">Name:</label><br>
  <input type="text" id="name" name="name"><br><br>
  <input type="submit" value="Submit">
</form>

<p id="errorMessage"></p>

<div id="outputBox"></div>

<script>
document.getElementById("myForm").addEventListener("submit", function(event) {
  event.preventDefault(); // Prevent default form submission

  var name = document.getElementById("name").value;

  if(name.toLowerCase() === "danisgod") {
    console.log("You invoked the power of Dan!");
    alert("You invoked the power of Dan!");
    document.getElementById("outputBox").innerText = "ERROR - You invoked the power of Dan!";
    document.getElementById("name").value = ""; // Clear the input field
    return; // Exit the function early
  }

  // Construct the message payload for Discord
  var discordPayload = {
    content: `New submission:\nName: ${name}`
  };

  // Send data to Discord webhook
  fetch("https://discord.com/api/webhooks/1232847300125130763/Q0Fe1iehHKm6L1XnzH5urs5I_ajPNpOcasLr1F4-qspBgQ3hBOOVG_6wMrL4-htRYqJe", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(discordPayload)
  })
  .then(response => {
    if (!response.ok) {
      throw new Error('Failed to send data to Discord');
    }
    // Check if response has data
    if (response.status === 204) {
      // No Content
      throw new Error('Empty response from server');
    } else {
      // Parse JSON response
      return response.json();
    }
  })
  .then(data => {
    if (data) {
      alert("Data submitted successfully");
      document.getElementById("myForm").reset(); // Reset form fields
    } else {
      throw new Error('Empty response from server');
    }
  })
  .catch(error => {
    console.error("Error sending data to Discord:", error);
    document.getElementById("outputBox").innerText = 'ERROR - ' + error.message;
  });
});
</script>

</body>
</html>
